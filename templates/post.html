{% extends "base.html" %}

{% block content %}
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-9">
        <div class="box">
          <div class="media">
              <div class="media-left">
                <figure class="image is-48x48">
                  <a href="/user/{{post.profile.github_username}}">
                    <img src="https://avatars.githubusercontent.com/{{post.profile.github_username}}" alt="Placeholder image">
                  </a>
                </figure>
              </div>
              <div class="media-content">
                <a href="/post/{{id}}" class="title is-4">{{ post.title }}</a><br>
                <a style="color: #4a4a4a;" href="/user/{{post.profile.github_username}}">{{ post.profile.full_name }}</a>
                -
                <a style="color: #4a4a4a;" href="/post/{{post.id}}"><small>{{ post.updated_on }}</small></a>
              </div>
          </div>
          <article class="media">
            {% if user.is_authenticated %}
            <figure class="media-left">
              <p class="image is-48x48">
                <img src="https://avatars.githubusercontent.com/{{user.profile.github_username}}">
              </p>
            </figure>
            {% endif %}
            <div class="media-content">
                <div class="field">
                  <p class="control">
                    <textarea id="comment-content" class="textarea" placeholder="Add a comment..."></textarea>
                  </p>
                </div>
                <nav class="level">
                  <div class="level-left">
                    <div class="level-item">
                      <a id="submit-comment-button" data-post-id='{{post.id}}' class="button is-info">Submit</a>
                    </div>
                  </div>
                </nav>
              </div>
          </article>
          <br>
          <div id="comments-holder">
          </div>
        </div>
        </div>
        <div class="column is-7">
          <div id="follow_list"></div>
        </div>
      </div>
  </div>
</section>
<script>
  var page_params = {
    post_id: {{post.id}},
    posted_by: {
      full_name: "{{post.profile.full_name|escapejs}}",
      github_username: "{{post.profile.github_username|escapejs}}",
      bio: "{{ post.profile.bio|escapejs }}",
      id: "{{ post.profile.id|escapejs }}",
      following: {{ following|escapejs }},
    },
    profile: {
      github_username: "{{user.profile.github_username|escapejs}}",
      full_name: "{{user.profile.full_name|escapejs}}",
    }
  }
</script>
<script src="/static/dist/post.bundle.js"></script>
<script src="/static/dist/follow.bundle.js"></script>
{% endblock %}